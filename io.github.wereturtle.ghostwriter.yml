app-id: io.github.wereturtle.ghostwriter
runtime: org.kde.Platform
runtime-version: 5.15-22.08
base: io.qt.qtwebengine.BaseApp
base-version: 5.15-22.08
sdk: org.kde.Sdk
command: ghostwriter
rename-icon: ghostwriter
rename-desktop-file: ghostwriter.desktop
rename-appdata-file: ghostwriter.appdata.xml
finish-args:
- "--socket=wayland"
- "--socket=x11"
- "--socket=pulseaudio"
- "--share=ipc"
- "--share=network"
- "--filesystem=home"
- "--device=dri"
- "--env=QTWEBENGINE_DISABLE_SANDBOX=1"
modules:
- name: cmark
  buildsystem: cmake-ninja
  builddir: true
  config-opts:
  - "-DCMAKE_BUILD_TYPE=Release"
  - "-DCMAKE_INSTALL_PREFIX=/app"
  sources:
  - type: git
    url: https://github.com/commonmark/cmark.git
    tag: 0.30.2
- name: MultiMarkdown
  buildsystem: cmake-ninja
  builddir: true
  config-opts:
  - "-DCMAKE_BUILD_TYPE=Release"
  - "-DCMAKE_INSTALL_PREFIX=/app"
  sources:
  - type: git
    url: https://github.com/fletcher/MultiMarkdown-6.git
    tag: 6.6.0
- name: Pandoc
  only-arches:
  - x86_64
  buildsystem: simple
  build-commands:
  - cp bin/pandoc /app/bin/pandoc
  sources:
  - type: archive
    url: https://github.com/jgm/pandoc/releases/download/2.19.2/pandoc-2.19.2-linux-amd64.tar.gz
    sha256: 9d55c7afb6a244e8a615451ed9cb02e6a6f187ad4d169c6d5a123fa74adb4830
- name: ghostwriter
  buildsystem: qmake
  builddir: true
  build-options:
    env:
    - QMAKEPATH=/app/lib
  config-opts:
  - QMAKE_INCDIR+=/app/include/QtWebEngine
  - QMAKE_INCDIR+=/app/include/QtWebEngineCore
  - QMAKE_INCDIR+=/app/include/QtWebEngineWidgets
  sources:
  - type: git
    url: https://github.com/wereturtle/ghostwriter.git
    commit: 151268bcfdca57bba4944caa7172dde9549f0622

